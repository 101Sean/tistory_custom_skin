<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Toggle</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="assets/darkmode-toggle.css">
  <script>
      $(document).ready(function() {
          var $body = $('body');
          var $darkModeToggle = $('.dark-mode-toggle');
          var $githubCard = $('#github-stats-card');
          var darkIcon = 'fa-moon';
          var lightIcon = 'fa-sun';
          var darkModeKey = 'darkMode';

          var baseUrl = 'https://github-readme-stats.vercel.app/api?username=101Sean&show_icons=true&include_all_commits=true&theme=transparent&hide=issues,prs,contribs&hide_rank=true';
          var lightParams = '&text_color=777777&title_color=777777&icon_color=214726';
          var darkParams = '&text_color=999999&title_color=999999&icon_color=70a379';

          function updateGithubCard(isDarkMode) {
              if ($githubCard.length) {
                  var params = isDarkMode ? darkParams : lightParams;
                  $githubCard.attr('src', baseUrl + params);
              }
          }

          var savedMode = localStorage.getItem(darkModeKey);

          if (savedMode === 'enabled') {
              $body.addClass('dark-mode');
              $darkModeToggle.find('i').removeClass(darkIcon).addClass(lightIcon);
              updateGithubCard(true);
          } else {
              $body.removeClass('dark-mode');
              $darkModeToggle.find('i').removeClass(lightIcon).addClass(darkIcon);
              updateGithubCard(false);
          }

          $darkModeToggle.on('click', function () {
              if ($body.hasClass('dark-mode')) {
                  $body.removeClass('dark-mode');
                  localStorage.setItem(darkModeKey, 'disabled');
                  $(this).find('i').removeClass(lightIcon).addClass(darkIcon);
                  updateGithubCard(false);
              } else {
                  $body.addClass('dark-mode');
                  localStorage.setItem(darkModeKey, 'enabled');
                  $(this).find('i').removeClass(darkIcon).addClass(lightIcon);
                  updateGithubCard(true);
              }
          });
      });
  </script>
</head>
<body>
  <button type="button" class="dark-mode-toggle">
    <i class="fas fa-moon"></i>
    <span class="screen_out">다크 모드 토글</span>
  </button>
</body>
</html>